오늘의 할일은 우리가 개발하고 있는 서비스 도커이미지 안에서 

python 3.8.5,tensorflow 2.3.0 upgrade후 코드가 돌아가게 수정하는 것이었다

파이썬을 설치하고 심볼릭 링크를 바꾸는 과정에서 로컬과 도커이미지 내부를 혼동하여 

어느샌가 로컬에서 파이썬과 텐서플로우 업그래이드 작업을 하고 있었다...
 
keras1.1.1로 저장된 모델을 json형식으로 로드하는 부분에서도 오류를 만나 시간을 많이 잡아먹었다

사수선배님께서 도와주셔서 도커이미지 내부에서 환경을 업데이트하고 이미지를 생성해야하는 것을 상기시켜주셨고

작업을 한번 더하게 되었다

파이썬 버전은 심볼릭링크를 수정하는것보다 alternative를 등록하여 원할때마다 바꿀 수 있도록 하는것이 좋은 것 같다

심볼릭링크를 수정하기위해서는 실행파일이있는 폴더에서 심볼릭링크를 조회해야한다

tensorflow는 pip search로 버전을 꼭 확인하고 업그레이하자

json형식으로 저장된 모델을 불러오는 과정에서 생긴문제는 2가지 방법으로 해결할 수 있다는 것을 알았다

첫번째는 json파일을 수정하여 key값을 수정해주는것이다 언뜻보면 쉬워보인다(python 내부적으로 처리하면된다)

두번쨰는 tensorflowjs로 기존의 h5파일로 json형식의 모델을 새로 만드는것이다(bash명령어로 실행해야한다)

글을 작성하다보니 첫번쨰 방법으로 해야겠다
